webpackHotUpdate("main",{

/***/ "":
false,

/***/ "./src/scripts/index.js":
/*!******************************!*\
  !*** ./src/scripts/index.js ***!
  \******************************/
/*! exports provided: map, generateListWithCountries, generateInformationTips, generateChartWithCountryInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"map\", function() { return map; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateListWithCountries\", function() { return generateListWithCountries; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateInformationTips\", function() { return generateInformationTips; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateChartWithCountryInfo\", function() { return generateChartWithCountryInfo; });\n/* harmony import */ var _stateData_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stateData.js */ \"./src/scripts/stateData.js\");\n/* harmony import */ var _interactions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactions */ \"./src/scripts/interactions.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoibm9jbHVlNHUiLCJhIjoiY2pvZWY2ZTA5MXdkbjN3bGVicm1hZDNvZCJ9.kIU-GIm7Cl36xhEFLaPU1w';\n\n\nObject(_interactions__WEBPACK_IMPORTED_MODULE_1__[\"initInteractions\"])();\nvar map = new mapboxgl.Map({\n  container: 'map',\n  style: 'mapbox://styles/noclue4u/cjoeoyn8u0htn2sobi8b7qy5k',\n  center: [10.214134, 47.440152],\n  maxZoom: 10,\n  minZoom: 3,\n  zoom: 3,\n  doubleClickZoom: false\n});\nvar container = map.getCanvasContainer();\nvar currentZoomLevel = map.getZoom();\nvar svg = d3.select(container).append('svg').append('g');\nmap.on('load', function () {\n  state.data.map = map;\n  state.data.loaded = true;\n  _stateData_js__WEBPACK_IMPORTED_MODULE_0__[\"filterAllData\"].then(function (res) {\n    initSelectOption(res);\n    generateInformationTips(res.map(function (d) {\n      return d;\n    }));\n    generateListWithCountries('#countries', res.map(function (d) {\n      return d;\n    }));\n  }).catch(function (err) {\n    return console.error(err);\n  });\n}); // Thanks to jorditost for showing how to display dots on mapbox\n\nfunction generateInformationTips(d, selectOption) {\n  var circles = svg.selectAll('circle').data(d).enter().append('circle').on('click', function (d) {\n    return toggleCountryInfo(d);\n  }).transition().duration(0).attr('cx', function (d) {\n    return project([+d.long, +d.lat]).x;\n  }).attr('cy', function (d) {\n    return project([+d.long, +d.lat]).y;\n  });\n\n  var update = function update() {\n    svg.selectAll('circle').attr('cx', function (d) {\n      return project([+d.long, +d.lat]).x;\n    }).attr('cy', function (d) {\n      return project([+d.long, +d.lat]).y;\n    }).transition().duration(750).attr('r', function (d) {\n      if (selectOption == 'totalDebt') {\n        return Math.sqrt(+d.debt[1] / 10e10 * 100) + 3;\n      } else if (selectOption == 'totalPopulation') {\n        return d.population.length ? Math.sqrt(+d.population[0].value / 10e6 * 100) + 3 : 0;\n      } else if (selectOption == 'totalDebtPerCitizen') {\n        return d.population.length ? Math.sqrt(+d.debt[1] / 10e10 / (+d.population[0].value / 10e6) * 100) + 3 : 0;\n      } else {\n        return Math.sqrt(+d.debt[1] / 10e10 * 100) + 3;\n      }\n    });\n  };\n\n  update();\n  map.on('viewreset', function () {\n    return update();\n  }).on('move', function () {\n    return update();\n  }).on('moveend', function () {\n    return update();\n  }).on('zoom', function () {\n    return update();\n  });\n}\n\nfunction generateListWithCountries(selection, d) {\n  var select = d3.select(selection).append('select').attr('class', 'countrySelection').on('change', function (e) {\n    var value = d3.select('.countrySelection').property('value');\n    return d.filter(function (country) {\n      return country.country == value;\n    }).map(function (d) {\n      return toggleCountryInfo(d);\n    });\n  });\n  select.selectAll('option').data(d.map(function (country) {\n    return country.country;\n  })).enter().append('option').text(function (d) {\n    return d;\n  });\n}\n\nfunction toggleCountryInfo(d) {\n  calculateDebtPerPerson(d);\n  setCountryInformationWidth('increase');\n  showCountryInformation(d);\n\n  if (state.data.showCountryInfo) {\n    generateChartWithCountryInfo(d);\n  }\n\n  map.flyTo({\n    center: [state.data.currGeoLocation.long, state.data.currGeoLocation.lat],\n    zoom: currentZoomLevel * 2,\n    offset: [-300, 0],\n    pitch: 30,\n    curve: 2,\n    speed: 0.5\n  });\n}\n\nfunction showCountryInformation(data) {\n  state.data.showCountryInfo = true;\n  state.data.country = data.country;\n  state.data.debt = data.debt;\n  state.data.population = data.population[0].value;\n  state.data.currGeoLocation = {\n    lat: data.lat,\n    long: data.long\n  };\n  state.data.selectedCountryProducts = data.food;\n}\n\nfunction calculateDebtPerPerson(data) {\n  var pastDebtInEuros = data.debt[0] ? data.debt[0] : 0;\n  var currentDebtInEuros = data.debt[1] ? data.debt[1] : data.debt;\n  var population = data.population[0].value ? data.population[0].value : '';\n  var currentDebt = (currentDebtInEuros / population).toFixed(2);\n  var pastDebt = (pastDebtInEuros / population).toFixed(2);\n  state.data.currentDebtPerCitizen = currentDebt;\n  state.data.pastDebtPerCitizen = pastDebt;\n}\n\nfunction generateChartWithCountryInfo(data) {\n  var debtCurrentYear = [];\n  var debtPastYear = [];\n  data.food.map(function (food) {\n    var newFoodObject = _objectSpread({\n      debt: Number((state.data.currentDebtPerCitizen / food.price).toFixed(0))\n    }, food);\n\n    var pastFoodObject = _objectSpread({\n      debt: Number((state.data.pastDebtPerCitizen / food.price).toFixed(0))\n    }, food);\n\n    debtCurrentYear.push(_objectSpread({\n      key: 2017\n    }, newFoodObject));\n    debtPastYear.push(_objectSpread({\n      key: 2016\n    }, pastFoodObject));\n  });\n  var debtPerYear = [].concat(debtPastYear, debtCurrentYear);\n\n  if (debtPerYear) {\n    drawBarChart(debtPerYear);\n  }\n}\n\nfunction drawBarChart(data) {\n  console.log(data); //chart based on https://bl.ocks.org/mbostock/3887051. Thanks Mike Bostock\n\n  var margin = {\n    top: 60,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  var width = 450 - margin.left - margin.right;\n  var height = 400 - margin.top - margin.bottom;\n  var svg = d3.select('.countryDebtChart');\n\n  if (!state.data.barchartIsDrawn) {\n    var _g = svg.append('g').attr('class', 'layer').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  }\n\n  var g = svg.select('.layer');\n  var x0 = d3.scaleBand().rangeRound([0, width]).paddingInner(0.1);\n  var x1 = d3.scaleBand().padding(0.05);\n  var y = d3.scaleLinear().rangeRound([height, 0]);\n  var z = d3.scaleOrdinal().range(['#F7E3AF', '#F7AF9D', '#C08497']);\n  x0.domain(data.map(function (d) {\n    return d.key;\n  }));\n  x1.domain(data.map(function (d) {\n    return d.name;\n  })).rangeRound([0, x0.bandwidth()]);\n  y.domain([0, d3.max(data, function (d) {\n    return d.debt;\n  })]).nice();\n  var structuredData = d3.nest().key(function (d) {\n    return d.key;\n  }).entries(data);\n  g.append('g').selectAll('g').data(structuredData).enter().append('g').attr('class', 'bar').attr('transform', function (d) {\n    return 'translate(' + x0(d.key) + ',0)';\n  }).selectAll('rect').data(function (d) {\n    return d.values.map(function (items) {\n      return _objectSpread({\n        key: items.key\n      }, items);\n    });\n  }).enter().append('rect').attr('x', function (d) {\n    return x1(d.name);\n  }).attr('y', function (d) {\n    return y(d.debt);\n  }).attr('width', x1.bandwidth()).attr('height', function (d) {\n    return height - y(d.debt);\n  }).attr('fill', function (d) {\n    return z(d.name);\n  }).on('mouseover', function (d) {\n    d3.select('#tooltip').style('right', 2 + 'vw').style('top', 48 + 'vh').select('#value').text(\"\\n\\t\\t\\t\\t\\tevery citizin should buy / sell \".concat(d.debt, \" \").concat(d.name, \" to pay off the debt.\\n\\t\\t\\t\\t\\tThe price of a \").concat(d.name, \" is \\u20AC\").concat(d.price));\n    d3.select('#tooltip').classed('hidden', false);\n  }).on('mouseout', function () {\n    return d3.select('#tooltip').classed('hidden', true);\n  });\n\n  if (!state.data.barchartIsDrawn) {\n    g.append('g').attr('class', 'xAxis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x0)).append('text').attr('fill', '#fff').attr('font-weight', 'bold').attr('text-anchor', 'start').attr('transform', \"translate(\".concat(width, \",0)\")).text('Years');\n    g.append('g').attr('class', 'yAxis').call(d3.axisLeft(y).ticks(null, 's')).append('text').attr('x', 2).attr('y', y(y.ticks().pop()) + 0.5).attr('dy', '0.32em').attr('fill', '#fff').attr('font-weight', 'bold').attr('text-anchor', 'start').text('Amount');\n  }\n\n  g.select('.xAxis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x0)).append('text').attr('fill', '#fff').attr('font-weight', 'bold').attr('text-anchor', 'start').attr('transform', \"translate(\".concat(width, \",0)\")).text('Years');\n  g.select('.yAxis').call(d3.axisLeft(y).ticks(null, 's')).append('text').attr('x', 2).attr('y', y(y.ticks().pop()) + 0.5).attr('dy', '0.32em').attr('fill', '#fff').attr('font-weight', 'bold').attr('text-anchor', 'start').text('Amount');\n  state.data.barchartIsDrawn = true;\n\n  function update(data) {\n    // https://bl.ocks.org/Andrew-Reid/64a6c1892d1893009d2b99b8abee75a7\n    var structuredData = d3.nest().key(function (d) {\n      return d.key;\n    }).entries(data);\n    x1.domain(data.map(function (d) {\n      return d.name;\n    })).rangeRound([0, x0.bandwidth()]);\n    y.domain([0, d3.max(data, function (d) {\n      return d.debt;\n    })]).nice();\n    svg.select('.yAxis').transition().call(d3.axisLeft(y).ticks(null, 's')).duration(500);\n    var barGroups = g.selectAll('g.bar').data(structuredData);\n    barGroups.enter().append('g').classed('bar', true).attr('transform', function (d) {\n      return 'translate(' + x0(d.key) + ',0)';\n    });\n    barGroups.exit().remove();\n    var bars = g.selectAll('g.bar').selectAll('rect').data(function (d) {\n      return d.values.map(function (items) {\n        return _objectSpread({\n          key: items.key\n        }, items);\n      });\n    });\n    bars.enter().append('rect').attr('x', function (d) {\n      return x1(d.name);\n    }).attr('y', function (d) {\n      return y(d.debt);\n    }).attr('width', x1.bandwidth()).attr('height', function (d) {\n      return height - y(d.debt);\n    }).attr('fill', function (d) {\n      return z(d.name);\n    });\n    bars.transition().duration(750).attr('y', function (d) {\n      return y(d.debt);\n    }).attr('height', function (d) {\n      return height - y(d.debt);\n    });\n  }\n\n  update(data);\n}\n\nfunction initSelectOption(data) {\n  mapDataFilter.addEventListener('change', function (e) {\n    generateInformationTips(data.map(function (d) {\n      return d;\n    }), e.target.value);\n  });\n}\n\nfunction checkIfExists(data, fallback) {\n  data > 1 || data.length && data !== undefined ? data : fallback;\n}\n\nfunction project(coords) {\n  return map.project(new mapboxgl.LngLat(+coords[0], +coords[1]));\n}\n\nfunction setCountryInformationWidth(statement) {\n  var infoWidth = document.querySelector('.map-section');\n  return statement == 'increase' ? infoWidth.style = 'width: 45vw; transform: translateX(0)' : infoWidth.style = 'width: 30vw; transform: translateX(0)';\n}\n\n\n\n//# sourceURL=webpack:///./src/scripts/index.js?");

/***/ }),

/***/ "./src/styles/index.css":
/*!******************************!*\
  !*** ./src/styles/index.css ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/styles/index.css?");

/***/ })

})